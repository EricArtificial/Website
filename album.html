<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>相册</title>
  <link rel="stylesheet" href="style.css" />
  </head>
<body class="hero-bg no-bg">
  <div class="navbar">
    <a href="index.html" class="logo">Our Story</a>
    <div class="nav-links">
      <a href="album.html">相册</a>
      <a href="memory.html">纪念册</a>
      <a href="tree.html">树苗</a>
    </div>
  </div>

  <main class="container" style="padding-top:14px; padding-bottom:56px;">
    <div class="album-hero">
      <h2 class="section-title fade-in">我们的相册</h2>

      <p class="fade-in" style="animation-delay:0.08s;">点击任意照片放大查看</p>
    </div>

    <section class="album-grid" aria-label="照片相册">
      <!-- Auto-generated from /Pics/ folder (captions removed) -->
      <figure data-index="0"><img src="Pics/IMG_0.jpg" alt="IMG_0" loading="lazy"></figure>
      <figure data-index="1"><img src="Pics/IMG_1.jpg" alt="IMG_1" loading="lazy"></figure>
      <figure data-index="3"><img src="Pics/IMG_3.jpg" alt="IMG_3" loading="lazy"></figure>
      <figure data-index="4"><img src="Pics/IMG_4.jpg" alt="IMG_4" loading="lazy"></figure>
      <figure data-index="5"><img src="Pics/IMG_5.jpg" alt="IMG_5" loading="lazy"></figure>
      <figure data-index="6"><img src="Pics/IMG_6.jpg" alt="IMG_6" loading="lazy"></figure>
      <figure data-index="7"><img src="Pics/IMG_7.jpg" alt="IMG_7" loading="lazy"></figure>
      <figure data-index="8"><img src="Pics/IMG_8.jpg" alt="IMG_8" loading="lazy"></figure>
      <figure data-index="9"><img src="Pics/IMG_9.jpg" alt="IMG_9" loading="lazy"></figure>
      <figure data-index="10"><img src="Pics/IMG_10.jpg" alt="IMG_10" loading="lazy"></figure>
      <figure data-index="11"><img src="Pics/IMG_11.jpg" alt="IMG_11" loading="lazy"></figure>
      <figure data-index="12"><img src="Pics/IMG_12.jpg" alt="IMG_12" loading="lazy"></figure>
      <figure data-index="13"><img src="Pics/IMG_13.jpg" alt="IMG_13" loading="lazy"></figure>
      <figure data-index="14"><img src="Pics/IMG_14.jpg" alt="IMG_14" loading="lazy"></figure>
      <figure data-index="15"><img src="Pics/IMG_15.jpg" alt="IMG_15" loading="lazy"></figure>
      <figure data-index="16"><img src="Pics/IMG_16.jpg" alt="IMG_16" loading="lazy"></figure>
      <figure data-index="17"><img src="Pics/IMG_17.jpg" alt="IMG_17" loading="lazy"></figure>
      <figure data-index="18"><img src="Pics/IMG_18.jpg" alt="IMG_18" loading="lazy"></figure>
      <figure data-index="19"><img src="Pics/IMG_19.jpg" alt="IMG_19" loading="lazy"></figure>
      <figure data-index="20"><img src="Pics/IMG_20.jpg" alt="IMG_20" loading="lazy"></figure>
      <figure data-index="21"><img src="Pics/IMG_21.jpg" alt="IMG_21" loading="lazy"></figure>
      <figure data-index="22"><img src="Pics/IMG_22.jpg" alt="IMG_22" loading="lazy"></figure>
      <figure data-index="23"><img src="Pics/IMG_23.jpg" alt="IMG_23" loading="lazy"></figure>
      <figure data-index="24"><img src="Pics/IMG_24.jpg" alt="IMG_24" loading="lazy"></figure>
      <figure data-index="25"><img src="Pics/IMG_25.jpg" alt="IMG_25" loading="lazy"></figure>
      <figure data-index="26"><img src="Pics/IMG_26.jpg" alt="IMG_26" loading="lazy"></figure>
      <figure data-index="27"><img src="Pics/IMG_27.jpg" alt="IMG_27" loading="lazy"></figure>
      <figure data-index="28"><img src="Pics/IMG_28.jpg" alt="IMG_28" loading="lazy"></figure>
      <figure data-index="29"><img src="Pics/IMG_29.jpg" alt="IMG_29" loading="lazy"></figure>
      <figure data-index="30"><img src="Pics/IMG_30.jpg" alt="IMG_30" loading="lazy"></figure>
      <figure data-index="31"><img src="Pics/IMG_31.jpg" alt="IMG_31" loading="lazy"></figure>
      <figure data-index="32"><img src="Pics/IMG_32.jpg" alt="IMG_32" loading="lazy"></figure>
      <figure data-index="33"><img src="Pics/IMG_33.jpg" alt="IMG_33" loading="lazy"></figure>
      <figure data-index="34"><img src="Pics/IMG_34.jpg" alt="IMG_34" loading="lazy"></figure>
      <figure data-index="35"><img src="Pics/IMG_35.jpg" alt="IMG_35" loading="lazy"></figure>
      <figure data-index="36"><img src="Pics/IMG_36.jpg" alt="IMG_36" loading="lazy"></figure>
      <figure data-index="37"><img src="Pics/IMG_37.jpg" alt="IMG_37" loading="lazy"></figure>
      <figure data-index="38"><img src="Pics/IMG_38.jpg" alt="IMG_38" loading="lazy"></figure>
      <figure data-index="39"><img src="Pics/IMG_39.jpg" alt="IMG_39" loading="lazy"></figure>
      <figure data-index="40"><img src="Pics/IMG_40.jpg" alt="IMG_40" loading="lazy"></figure>
      <figure data-index="41"><img src="Pics/IMG_41.jpg" alt="IMG_41" loading="lazy"></figure>
      <figure data-index="42"><img src="Pics/IMG_42.jpg" alt="IMG_42" loading="lazy"></figure>
      <figure data-index="43"><img src="Pics/IMG_43.jpg" alt="IMG_43" loading="lazy"></figure>
      <figure data-index="44"><img src="Pics/IMG_44.jpg" alt="IMG_44" loading="lazy"></figure>
      <figure data-index="45"><img src="Pics/IMG_45.jpg" alt="IMG_45" loading="lazy"></figure>
      <figure data-index="46"><img src="Pics/IMG_46.jpg" alt="IMG_46" loading="lazy"></figure>
      <figure data-index="47"><img src="Pics/IMG_47.jpg" alt="IMG_47" loading="lazy"></figure>
      <figure data-index="48"><img src="Pics/IMG_48.jpg" alt="IMG_48" loading="lazy"></figure>
      <figure data-index="49"><img src="Pics/IMG_49.jpg" alt="IMG_49" loading="lazy"></figure>
      <figure data-index="50"><img src="Pics/IMG_50.jpg" alt="IMG_50" loading="lazy"></figure>
      <figure data-index="51"><img src="Pics/IMG_51.jpg" alt="IMG_51" loading="lazy"></figure>
      <figure data-index="52"><img src="Pics/IMG_52.jpg" alt="IMG_52" loading="lazy"></figure>
      <figure data-index="53"><img src="Pics/IMG_53.jpg" alt="IMG_53" loading="lazy"></figure>
      <figure data-index="54"><img src="Pics/IMG_54.jpg" alt="IMG_54" loading="lazy"></figure>
      <figure data-index="55"><img src="Pics/IMG_55.jpg" alt="IMG_55" loading="lazy"></figure>
      <figure data-index="56"><img src="Pics/IMG_56.jpg" alt="IMG_56" loading="lazy"></figure>
      <figure data-index="57"><img src="Pics/IMG_57.jpg" alt="IMG_57" loading="lazy"></figure>
      <figure data-index="58"><img src="Pics/IMG_58.jpg" alt="IMG_58" loading="lazy"></figure>
      <figure data-index="59"><img src="Pics/IMG_59.jpg" alt="IMG_59" loading="lazy"></figure>
      <figure data-index="60"><img src="Pics/IMG_60.jpg" alt="IMG_60" loading="lazy"></figure>
      <figure data-index="61"><img src="Pics/IMG_61.jpg" alt="IMG_61" loading="lazy"></figure>
      <figure data-index="62"><img src="Pics/IMG_62.jpg" alt="IMG_62" loading="lazy"></figure>
      <figure data-index="63"><img src="Pics/IMG_63.jpg" alt="IMG_63" loading="lazy"></figure>
      <figure data-index="64"><img src="Pics/IMG_64.jpg" alt="IMG_64" loading="lazy"></figure>
      <figure data-index="65"><img src="Pics/IMG_65.jpg" alt="IMG_65" loading="lazy"></figure>
      <figure data-index="66"><img src="Pics/IMG_66.jpg" alt="IMG_66" loading="lazy"></figure>
      <figure data-index="67"><img src="Pics/IMG_67.jpg" alt="IMG_67" loading="lazy"></figure>
      <figure data-index="68"><img src="Pics/IMG_68.jpg" alt="IMG_68" loading="lazy"></figure>
      <figure data-index="69"><img src="Pics/IMG_69.jpg" alt="IMG_69" loading="lazy"></figure>
      <figure data-index="70"><img src="Pics/IMG_70.jpg" alt="IMG_70" loading="lazy"></figure>
      <figure data-index="71"><img src="Pics/IMG_71.jpg" alt="IMG_71" loading="lazy"></figure>
      <figure data-index="72"><img src="Pics/IMG_72.jpg" alt="IMG_72" loading="lazy"></figure>
      <figure data-index="73"><img src="Pics/IMG_73.jpg" alt="IMG_73" loading="lazy"></figure>
      <figure data-index="74"><img src="Pics/IMG_74.jpg" alt="IMG_74" loading="lazy"></figure>
      <figure data-index="75"><img src="Pics/IMG_75.jpg" alt="IMG_75" loading="lazy"></figure>

  </main>

  <!-- Lightbox modal -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="图片预览">
    <button class="lb-close" aria-label="关闭 (Esc)">&times;</button>
    <div class="lb-stage">
      <img src="" alt="" />
      <div class="lb-caption"></div>
    </div>
    <button class="lb-prev" aria-label="上一张">‹</button>
    <button class="lb-next" aria-label="下一张">›</button>
  </div>

  <script>
  (function(){
    const figures = Array.from(document.querySelectorAll('.album-grid figure'));
    const lightbox = document.getElementById('lightbox');
    const lbImg = lightbox.querySelector('img');
    const lbCaption = lightbox.querySelector('.lb-caption');
    const btnClose = lightbox.querySelector('.lb-close');
    const btnPrev = lightbox.querySelector('.lb-prev');
    const btnNext = lightbox.querySelector('.lb-next');
    let current = 0;

    function open(index){
      const fig = figures[index];
      if(!fig) return;
      const img = fig.querySelector('img');
      lbImg.src = img.src;
      lbImg.alt = img.alt || '';
      lbCaption.textContent = fig.querySelector('figcaption')?.textContent || '';
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden', 'false');
      current = index;
      // trap focus to close button
      btnClose.focus();
    }

    function close(){
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden', 'true');
      lbImg.src = '';
    }

    function next(){ open(Math.min(current + 1, figures.length - 1)); }
    function prev(){ open(Math.max(current - 1, 0)); }

    figures.forEach((f, i) => {
      // normalize dataset index to the array position so clicks always map correctly
      f.dataset.index = i;
      f.addEventListener('click', () => open(i));
      f.addEventListener('keydown', e => { if(e.key === 'Enter') open(i); });
    });

    // Entrance animation: staggered fade-in for thumbnails (match header text)
    if (!(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches)) {
      figures.forEach((f, i) => {
        f.classList.add('fade-in');
        f.style.animationDelay = `${0.08 + i * 0.04}s`;
      });
    } else {
      // ensure visible immediately for reduced motion
      figures.forEach(f => { f.style.opacity = 1; f.style.transform = 'none'; });
    }

    btnClose.addEventListener('click', close);
    btnNext.addEventListener('click', () => { next(); });
    btnPrev.addEventListener('click', () => { prev(); });

    document.addEventListener('keydown', (e) => {
      if(lightbox.classList.contains('open')){
        if(e.key === 'Escape') close();
        if(e.key === 'ArrowRight') next();
        if(e.key === 'ArrowLeft') prev();
      }
    });

    // touch swipe for lightbox
    (function(){
      let startX = 0, moved = false;
      lightbox.addEventListener('touchstart', e => { startX = e.touches[0].clientX; moved = false; }, {passive:true});
      lightbox.addEventListener('touchmove', e => { moved = true; }, {passive:true});
      lightbox.addEventListener('touchend', e => {
        if(!moved) return;
        const dx = e.changedTouches[0].clientX - startX;
        if(Math.abs(dx) > 50){ if(dx < 0) next(); else prev(); }
      }, {passive:true});
    })();

    // close when clicking outside image area
    lightbox.addEventListener('click', (e) => { if(e.target === lightbox) close(); });
  })();
  </script>

</body>
</html>
